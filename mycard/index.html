<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KLD â€“ Digital Card Generator</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Inter,system-ui;
  background:#0b0f14;
  color:#fff;
}
.header{
  text-align:center;
  padding:18px;
  font-size:22px;
  font-weight:700;
}
.header span{
  display:block;
  font-size:13px;
  opacity:.7;
}
.container{
  max-width:780px;
  margin:auto;
  padding:20px;
}
input,select,textarea{
  width:100%;
  padding:12px;
  margin:8px 0;
  border:none;
  border-radius:10px;
  background:#1b1f2a;
  color:#fff;
}
textarea{height:260px;font-size:13px;}
.row{display:flex;gap:8px;}

button{
  width:100%;
  padding:14px;
  margin-top:10px;
  border:none;
  border-radius:14px;
  font-size:14px;
  cursor:pointer;
}
.btn-generate{background:#6c5ce7;box-shadow:0 0 14px #6c5ce7;}
.btn-preview{background:#e17055;box-shadow:0 0 14px #e17055;}
.btn-download{background:#fdcb6e;color:#000;box-shadow:0 0 14px #fdcb6e;}

.social-box{
  background:#222736;
  padding:8px 10px;
  border-radius:8px;
  font-size:13px;
  margin-bottom:6px;
}

.toast{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:#000;
  color:#fff;
  padding:10px 16px;
  border-radius:20px;
  opacity:0;
  transition:.3s;
}
.toast.show{opacity:1;}
</style>
</head>

<body>

<div class="header">
  KLD
  <span>Professional Digital Portfolio Generator</span>
</div>

<div class="container">

<input id="fullName" placeholder="Full Name">
<input id="shop" placeholder="Shop / Business Name">
<input id="email" placeholder="Email">
<input id="phone" placeholder="Phone Number">

<input id="photoUrl" placeholder="Profile Image URL (auto)">
<input type="file" id="photoFile" accept="image/*">

<div class="row">
  <select id="layout">
    <option value="glass">Glass Card</option>
    <option value="outline">Outline Card</option>
    <option value="minimal">Minimal Card</option>
  </select>

  <select id="borderMode">
    <option value="animated">Animated Border</option>
    <option value="static">Static Border</option>
  </select>
</div>

<div class="row">
  <select id="socialType">
    <option value="instagram">Instagram</option>
    <option value="whatsapp">WhatsApp</option>
    <option value="facebook">Facebook</option>
    <option value="linkedin">LinkedIn</option>
    <option value="twitter">X</option>
    <option value="snapchat">Snapchat</option>
    <option value="github">GitHub</option>
    <option value="youtube">YouTube</option>
  </select>
  <input id="socialLink" placeholder="Social link">
</div>

<button onclick="addSocial()">+ Add Social</button>
<div id="socialList"></div>

<button class="btn-generate" onclick="generate()">Generate HTML</button>
<button id="previewBtn" class="btn-preview" onclick="preview()" style="display:none;">Preview</button>
<button class="btn-download" onclick="downloadHTML()">Download HTML</button>

<textarea id="result" placeholder="Generated HTML code"></textarea>

</div>

<div id="toast" class="toast"></div>

<script>
let socials=[];
let previewURL=null;

/* TOAST */
function showToast(msg){
  const t=document.getElementById("toast");
  t.textContent=msg;
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"),2000);
}

/* AUTO IMAGE UPLOAD */
document.getElementById("photoFile").addEventListener("change", async function(){
  const file=this.files[0];
  if(!file) return;

  const formData=new FormData();
  formData.append("image",file);

  showToast("Uploading image...");

  try{
    const res=await fetch(
      "https://api.imgbb.com/1/upload?key=1ad5f21ba833f28e031a13dd608a5777",
      {method:"POST",body:formData}
    );
    const data=await res.json();

    if(data.success){
      document.getElementById("photoUrl").value=data.data.url;
      showToast("Photo upload successful");
    }else{
      showToast("Upload failed");
    }
  }catch{
    showToast("Upload error");
  }
});

/* SOCIAL */
function addSocial(){
  if(!socialLink.value) return;
  socials.push({type:socialType.value,link:socialLink.value});
  const d=document.createElement("div");
  d.className="social-box";
  d.textContent=socialType.value+" : "+socialLink.value;
  socialList.appendChild(d);
  socialLink.value="";
}

/* GENERATE */
function generate(){
  const fullNameVal=document.getElementById("fullName").value;
  const shopVal=document.getElementById("shop").value;
  const emailVal=document.getElementById("email").value;
  const phoneVal=document.getElementById("phone").value;
  const photoVal=document.getElementById("photoUrl").value;

  const icons={
    instagram:"fa-instagram",whatsapp:"fa-whatsapp",facebook:"fa-facebook",
    linkedin:"fa-linkedin",twitter:"fa-x-twitter",
    snapchat:"fa-snapchat",github:"fa-github",youtube:"fa-youtube"
  };

  const socialsHTML=socials.map(s=>
    `<a href="${s.link}" target="_blank"><i class="fa-brands ${icons[s.type]}"></i></a>`
  ).join("");

  const borderCSS = borderMode.value==="animated"
  ? `
.avatar::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:50%;
  padding:5px;
  background:conic-gradient(#6c5ce7,transparent,#6c5ce7);
  animation:spin 4s linear infinite;
  mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);
  -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
          mask-composite:exclude;
}`
  : `.avatar{border:5px solid #6c5ce7;}`;

  const cardCSS = layout.value==="glass"
  ? `background:rgba(255,255,255,0.08);box-shadow:0 25px 60px rgba(0,0,0,.45);`
  : layout.value==="outline"
  ? `background:transparent;border:2px solid #6c5ce7;`
  : `background:transparent;`;

  const vcard = encodeURIComponent(
`BEGIN:VCARD
VERSION:3.0
FN:${fullNameVal}
ORG:${shopVal}
TEL:${phoneVal}
EMAIL:${emailVal}
END:VCARD`
  );

  const html = `
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  font-family:Inter,system-ui;
  background:#0b0f14;
  color:#fff;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.card{
  width:100%;
  max-width:520px;
  padding:42px 28px;
  border-radius:26px;
  text-align:center;
  ${cardCSS}
}
.avatar{
  position:relative;
  width:150px;
  height:150px;
  margin:0 auto 22px;
  border-radius:50%;
}
.avatar img{
  width:100%;
  height:100%;
  border-radius:50%;
  object-fit:cover;
}
${borderCSS}
h1{margin:8px 0 4px;font-size:26px;font-weight:700;}
.shop{font-size:15px;opacity:.85;margin-bottom:10px;}
.actions{
  display:flex;
  justify-content:center;
  gap:12px;
  margin:12px 0;
}
.actions a{
  padding:8px 14px;
  border-radius:20px;
  background:#6c5ce7;
  color:#fff;
  text-decoration:none;
  font-size:13px;
}
.socials{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-top:20px;
}
.socials a{font-size:24px;color:#6c5ce7;}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
</style>
</head>
<body>
<div class="card">
  ${photoVal?`<div class="avatar"><img src="${photoVal}"></div>`:""}
  <h1>${fullNameVal}</h1>
  <div class="shop">${shopVal}</div>

  <div class="actions">
    <a href="tel:${phoneVal}">Call</a>
    <a href="mailto:${emailVal}">Email</a>
    <a href="data:text/vcard;charset=utf-8,${vcard}" download="contact.vcf">Save Contact</a>
  </div>

  <div class="socials">${socialsHTML}</div>
</div>
</body>
</html>
`.trim();

  result.value=html;
  previewBtn.style.display="block";
  showToast("HTML generated");
}

/* PREVIEW */
function preview(){
  const blob=new Blob([result.value],{type:"text/html"});
  if(previewURL) URL.revokeObjectURL(previewURL);
  previewURL=URL.createObjectURL(blob);
  window.open(previewURL);
}

/* DOWNLOAD */
function downloadHTML(){
  const blob=new Blob([result.value],{type:"text/html"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="index.html";
  a.click();
}
</script>

</body>
</html>
